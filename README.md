Для запуска бота нужно создать файл .env в корневом каталоге и заполнить по примеру из .env.example

**Троттлинг**

Троттлинг или удушение нужен для:
Защита от спама и случайного двойного нажатия, в частных случаях от ддос, но вряд ли поможет.

При первом сообщении id пользователя заносится в словарь, например Redis.
Запись в словаре имеет время жизни и если приходит сообщение раньше срока жизни ключа в словаре, то сообщение игнорируется.


**Теневой бан**

Для тестов доступны команды /ban /unban

Обычно, приложение бота не имеет возможности забанить пользователя.
Тут приходит на помощь система теневого бана, по сути это фильтр проверяющий id пользователя на наличие в бан листе.


**Локализация, интернационализация**

Для тестов доступны команды /ru /en

При вызове команды start берется language_code пользователя, заносится в бд.
При отправке сообщений берется бд с нужным языком и отправляется пользователю сообщение на удобном ему языке.

Увеличит конверсию пользователей среди иностранных туристов да и просто статусно ))


**Callback**


Предлагаю добавить payload к callback data

Время: необходимо для того, чтобы пользователь не мог воспользоваться старой клавиатурой, функционал которой скорее всего устарел или
не актуален

Id пользователя: нужен для проверки подмены аккаунта.
Если id в callback data не совпадает с id отправителя - стоит игнорировать такое сообщение.


**Что можно было бы добавить, но этого нет в данной реализации**


**Callback**

Версия бота, для избегания вызова отсутствующих или устаревших функций приложения.

Хэширование всей callback data, позволит избежать подбора нужного значения.

Вместо ссылок на реальные функции или записи в бд можно выгружать данные во временное хранилище.
Пользователю отправлять ключ на ячейку в этом хранилище, а затем выдавать информацию из хранилища.
Позволит избежать подбора callback data для анализа структуры бд.

В идеале попробовать реализовать на основе токенов.

**FSM**

Finite state machine, конечный автомат:
Нужен для сохранения прогресса пользователя во время использования бота.
Так же нужен для четкого выполнения use case во время работы с приложением.
Позволит снизить шанс получения неожиданного результата связанного с отправкой команд не в нужное время и не в нужном месте.

**Имплементация middleware**

Стоит добавить, это удобно для расширения.
Все предложенные улучшения можно добавить именно в middleware избегая при этом переписывания самого бота.


**Callback factory**

Все кнопки и callback data к ним формировать динамически через класс-фабрику
Можно взять как идею для будущего функционала